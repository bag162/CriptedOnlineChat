{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\DELL\\\\source\\\\repos\\\\CriptedOnlineChat\\\\CriptedOnlineChat\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Inject } from '@angular/core';\nimport { db } from 'src/db';\nimport { RSAService } from 'src/app/rsa';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"src/app/rsa\";\nlet RegisterUserComponent = class RegisterUserComponent {\n  constructor(http, baseUrl, rsaService) {\n    this.http = http;\n    this.baseUrl = baseUrl;\n    this.rsaService = rsaService;\n    this.currentUser = {\n      Login: \"\"\n    };\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var user = yield db.User.toArray();\n\n      if (user.length != 0) {\n        console.log(\"Пользователь зарегестрирован\");\n        _this.currentUser = user[0];\n        $(\"#inputLogin\").prop(\"disabled\", true);\n        $(\"#sendButton\").hide();\n      }\n\n      console.log(_this.rsaService.GenerateKeyPairs);\n    })();\n  }\n\n  RegisterUser() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this2.currentUser.Login == \"\") {\n        // add notify\n        return;\n      }\n\n      yield _this2.http.post(_this2.baseUrl + \"user\", _this2.currentUser).subscribe(result => _this2.DisplayNotify(result));\n      return;\n    })();\n  }\n\n  DisplayNotify(resultRequest) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (resultRequest == \"true\") {\n        yield db.User.add(yield _this3.currentUser, 0);\n        console.log(resultRequest + \"true\");\n        $(\"#inputLogin\").prop(\"disabled\", true);\n        $(\"#sendButton\").hide();\n        $(\"#succesNotify\").show(500);\n        setTimeout(() => {\n          $(\"#succesNotify\").hide(500);\n        }, 2500);\n      } else {\n        console.log(resultRequest + \"false\");\n        $(\"#dangerNotify\").show(500);\n        setTimeout(() => {\n          $(\"#dangerNotify\").hide(500);\n        }, 2500);\n      }\n    })();\n  }\n\n};\n\nRegisterUserComponent.ɵfac = function RegisterUserComponent_Factory(t) {\n  return new (t || RegisterUserComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i2.RSAService));\n};\n\nRegisterUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterUserComponent,\n  selectors: [[\"register-user-component\"]],\n  features: [i0.ɵɵProvidersFeature([RSAService])],\n  decls: 0,\n  vars: 0,\n  template: function RegisterUserComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nRegisterUserComponent = __decorate([Inject], RegisterUserComponent);\nexport { RegisterUserComponent };","map":{"version":3,"sources":["C:/Users/DELL/source/repos/CriptedOnlineChat/CriptedOnlineChat/ClientApp/src/app/ContactListComponent/RegisterUserComponent/registerUserComponent.ts"],"names":["__decorate","Inject","db","RSAService","i0","i1","i2","RegisterUserComponent","constructor","http","baseUrl","rsaService","currentUser","Login","ngOnInit","user","User","toArray","length","console","log","$","prop","hide","GenerateKeyPairs","RegisterUser","post","subscribe","result","DisplayNotify","resultRequest","add","show","setTimeout","ɵfac","RegisterUserComponent_Factory","t","ɵɵdirectiveInject","HttpClient","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵProvidersFeature","decls","vars","template","RegisterUserComponent_Template","rf","ctx","encapsulation"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Inject } from '@angular/core';\r\nimport { db } from 'src/db';\r\nimport { RSAService } from 'src/app/rsa';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nimport * as i2 from \"src/app/rsa\";\r\nlet RegisterUserComponent = class RegisterUserComponent {\r\n    constructor(http, baseUrl, rsaService) {\r\n        this.http = http;\r\n        this.baseUrl = baseUrl;\r\n        this.rsaService = rsaService;\r\n        this.currentUser = { Login: \"\" };\r\n    }\r\n    async ngOnInit() {\r\n        var user = await db.User.toArray();\r\n        if (user.length != 0) {\r\n            console.log(\"Пользователь зарегестрирован\");\r\n            this.currentUser = user[0];\r\n            $(\"#inputLogin\").prop(\"disabled\", true);\r\n            $(\"#sendButton\").hide();\r\n        }\r\n        console.log(this.rsaService.GenerateKeyPairs);\r\n    }\r\n    async RegisterUser() {\r\n        if (this.currentUser.Login == \"\") {\r\n            // add notify\r\n            return;\r\n        }\r\n        await this.http.post(this.baseUrl + \"user\", this.currentUser).subscribe(result => this.DisplayNotify(result));\r\n        return;\r\n    }\r\n    async DisplayNotify(resultRequest) {\r\n        if (resultRequest == \"true\") {\r\n            await db.User.add(await this.currentUser, 0);\r\n            console.log(resultRequest + \"true\");\r\n            $(\"#inputLogin\").prop(\"disabled\", true);\r\n            $(\"#sendButton\").hide();\r\n            $(\"#succesNotify\").show(500);\r\n            setTimeout(() => {\r\n                $(\"#succesNotify\").hide(500);\r\n            }, 2500);\r\n        }\r\n        else {\r\n            console.log(resultRequest + \"false\");\r\n            $(\"#dangerNotify\").show(500);\r\n            setTimeout(() => {\r\n                $(\"#dangerNotify\").hide(500);\r\n            }, 2500);\r\n        }\r\n    }\r\n};\r\nRegisterUserComponent.ɵfac = function RegisterUserComponent_Factory(t) { return new (t || RegisterUserComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i2.RSAService)); };\r\nRegisterUserComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: RegisterUserComponent, selectors: [[\"register-user-component\"]], features: [i0.ɵɵProvidersFeature([RSAService])], decls: 0, vars: 0, template: function RegisterUserComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\nRegisterUserComponent = __decorate([\r\n    Inject\r\n], RegisterUserComponent);\r\nexport { RegisterUserComponent };\r\n"]},"metadata":{},"sourceType":"module"}