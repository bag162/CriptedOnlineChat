{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\DELL\\\\source\\\\repos\\\\CriptedOnlineChat\\\\CriptedOnlineChat\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../Services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/db\";\nimport * as i4 from \"@angular/forms\";\nexport let RegisterUserComponent = /*#__PURE__*/(() => {\n  class RegisterUserComponent {\n    constructor(registerUser, userService, router, appDb) {\n      this.registerUser = registerUser;\n      this.userService = userService;\n      this.router = router;\n      this.appDb = appDb;\n    }\n\n    registerNewUser() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        if (_this.registerUser.password != _this.registerUser.repeatPassword) {\n          $('.invalidMessage').text(\"Password mismatch\");\n          $('.form-control').addClass('is-invalid');\n          return;\n        }\n\n        var result = yield _this.userService.RegisterUser(_this.registerUser);\n\n        if (result.isSuccess) {\n          let newUser = {\n            Login: result.login,\n            id: result.id\n          };\n\n          _this.appDb.User.add(newUser);\n\n          _this.router.navigate(['']);\n        } else {\n          $(\".form-control\").addClass(\"is-invalid\");\n          $('.invalidMessage').text(result.descriptionError);\n        }\n      })();\n    }\n\n    deleteErrorNotify() {\n      $(\".form-control\").removeClass(\"is-invalid\");\n    }\n\n    redirectToLoginPage() {\n      this.router.navigate(['login']);\n    }\n\n  }\n\n  RegisterUserComponent.ɵfac = function RegisterUserComponent_Factory(t) {\n    return new (t || RegisterUserComponent)(i0.ɵɵdirectiveInject(i1.RegisterUserDTO), i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AppDB));\n  };\n\n  RegisterUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterUserComponent,\n    selectors: [[\"register-user-component\"]],\n    features: [i0.ɵɵProvidersFeature([])],\n    decls: 29,\n    vars: 4,\n    consts: [[1, \"d-flex\", \"justify-content-center\"], [1, \"border\", \"col-md-4\", \"p-3\", \"mt-5\"], [1, \"form-group\"], [\"for\", \"exampleInputEmail1\"], [\"name\", \"login\", \"type\", \"email\", \"id\", \"exampleInputEmail1\", \"aria-describedby\", \"emailHelp\", \"placeholder\", \"Enter login\", 1, \"form-control\", 3, \"ngModel\", \"click\", \"ngModelChange\"], [1, \"invalid-feedback\"], [\"name\", \"password\", \"type\", \"password\", \"id\", \"exampleInputPassword1\", \"placeholder\", \"Enter password\", 1, \"form-control\", 3, \"ngModel\", \"click\", \"ngModelChange\"], [\"name\", \"repeatPassword\", \"type\", \"password\", \"id\", \"exampleInputPassword1\", \"placeholder\", \"Re-enter your password\", 1, \"form-control\", 3, \"ngModel\", \"click\", \"ngModelChange\"], [1, \"invalid-feedback\", \"invalidMessage\"], [1, \"form-check\", \"pt-1\", \"pb-1\"], [\"name\", \"isPersistent\", \"type\", \"checkbox\", \"id\", \"exampleCheck1\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"exampleCheck1\", 1, \"form-check-label\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-success\", \"mt-3\", 3, \"click\"]],\n    template: function RegisterUserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"form\", 1);\n        i0.ɵɵelementStart(2, \"h2\");\n        i0.ɵɵtext(3, \"Registration\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"label\", 3);\n        i0.ɵɵtext(6, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"input\", 4);\n        i0.ɵɵlistener(\"click\", function RegisterUserComponent_Template_input_click_7_listener() {\n          return ctx.deleteErrorNotify();\n        })(\"ngModelChange\", function RegisterUserComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.registerUser.login = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 2);\n        i0.ɵɵelementStart(10, \"label\");\n        i0.ɵɵtext(11, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 6);\n        i0.ɵɵlistener(\"click\", function RegisterUserComponent_Template_input_click_12_listener() {\n          return ctx.deleteErrorNotify();\n        })(\"ngModelChange\", function RegisterUserComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.registerUser.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 2);\n        i0.ɵɵelementStart(15, \"label\");\n        i0.ɵɵtext(16, \"Repeat password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 7);\n        i0.ɵɵlistener(\"click\", function RegisterUserComponent_Template_input_click_17_listener() {\n          return ctx.deleteErrorNotify();\n        })(\"ngModelChange\", function RegisterUserComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.registerUser.repeatPassword = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 8);\n        i0.ɵɵtext(19, \" Registration error \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 9);\n        i0.ɵɵelementStart(21, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterUserComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.registerUser.isPersistent = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"label\", 11);\n        i0.ɵɵtext(23, \"Remember me\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function RegisterUserComponent_Template_button_click_24_listener() {\n          return ctx.registerNewUser();\n        });\n        i0.ɵɵtext(25, \"Registration\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\");\n        i0.ɵɵelementStart(27, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function RegisterUserComponent_Template_button_click_27_listener() {\n          return ctx.redirectToLoginPage();\n        });\n        i0.ɵɵtext(28, \"I have an account. Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.registerUser.login);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.registerUser.password);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.registerUser.repeatPassword);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.registerUser.isPersistent);\n      }\n    },\n    directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i4.CheckboxControlValueAccessor],\n    encapsulation: 2\n  });\n  return RegisterUserComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}