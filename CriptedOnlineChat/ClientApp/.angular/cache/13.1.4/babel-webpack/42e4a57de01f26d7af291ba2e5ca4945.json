{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\DELL\\\\source\\\\repos\\\\CriptedOnlineChat\\\\CriptedOnlineChat\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as signalR from '@microsoft/signalr';\nimport { HubConnectionBuilder } from '@microsoft/signalr';\nimport * as i0 from \"@angular/core\";\nexport class WebSocketService {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl + \"schatHub\";\n    this.HubConnection = new HubConnectionBuilder().configureLogging(signalR.LogLevel.Debug).withUrl(\"http://localhost:5172/schatHub\", {\n      skipNegotiation: true,\n      transport: signalR.HttpTransportType.WebSockets\n    }).build();\n    this.HubConnection.start();\n    this.initWebSocket();\n  }\n\n  initWebSocket() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.HubConnection.on(\"Test\", message => {\n        console.log(message);\n      });\n    })();\n  }\n\n  sendMessage(message, recipientLogin) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.HubConnection.send(\"SendMessage\", message, recipientLogin);\n    })();\n  }\n\n  SendPublicRSAKey(rsaKey) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      console.log();\n      yield _this3.HubConnection.send(\"SendRSAKeys\", rsaKey);\n    })();\n  }\n\n}\n\nWebSocketService.ɵfac = function WebSocketService_Factory(t) {\n  return new (t || WebSocketService)(i0.ɵɵinject('BASE_URL'));\n};\n\nWebSocketService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: WebSocketService,\n  factory: WebSocketService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/DELL/source/repos/CriptedOnlineChat/CriptedOnlineChat/ClientApp/src/app/Services/WebSocket.service.ts"],"names":["signalR","HubConnectionBuilder","i0","WebSocketService","constructor","baseUrl","HubConnection","configureLogging","LogLevel","Debug","withUrl","skipNegotiation","transport","HttpTransportType","WebSockets","build","start","initWebSocket","on","message","console","log","sendMessage","recipientLogin","send","SendPublicRSAKey","rsaKey","ɵfac","WebSocketService_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,OAAO,KAAKA,OAAZ,MAAyB,oBAAzB;AACA,SAASC,oBAAT,QAAqC,oBAArC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,MAAMC,gBAAN,CAAuB;AAC1BC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKA,OAAL,GAAeA,OAAO,GAAG,UAAzB;AACA,SAAKC,aAAL,GAAqB,IAAIL,oBAAJ,GAChBM,gBADgB,CACCP,OAAO,CAACQ,QAAR,CAAiBC,KADlB,EAEhBC,OAFgB,CAER,gCAFQ,EAE0B;AAC3CC,MAAAA,eAAe,EAAE,IAD0B;AAE3CC,MAAAA,SAAS,EAAEZ,OAAO,CAACa,iBAAR,CAA0BC;AAFM,KAF1B,EAMhBC,KANgB,EAArB;AAOA,SAAKT,aAAL,CAAmBU,KAAnB;AACA,SAAKC,aAAL;AACH;;AACKA,EAAAA,aAAa,GAAG;AAAA;;AAAA;AAClB,YAAM,KAAI,CAACX,aAAL,CAAmBY,EAAnB,CAAsB,MAAtB,EAA8BC,OAAO,IAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AAAuB,OAAlE,CAAN;AADkB;AAErB;;AACKG,EAAAA,WAAW,CAACH,OAAD,EAAUI,cAAV,EAA0B;AAAA;;AAAA;AACvC,YAAM,MAAI,CAACjB,aAAL,CAAmBkB,IAAnB,CAAwB,aAAxB,EAAuCL,OAAvC,EAAgDI,cAAhD,CAAN;AADuC;AAE1C;;AACKE,EAAAA,gBAAgB,CAACC,MAAD,EAAS;AAAA;;AAAA;AAC3BN,MAAAA,OAAO,CAACC,GAAR;AACA,YAAM,MAAI,CAACf,aAAL,CAAmBkB,IAAnB,CAAwB,aAAxB,EAAuCE,MAAvC,CAAN;AAF2B;AAG9B;;AAtByB;;AAwB9BvB,gBAAgB,CAACwB,IAAjB,GAAwB,SAASC,wBAAT,CAAkCC,CAAlC,EAAqC;AAAE,SAAO,KAAKA,CAAC,IAAI1B,gBAAV,EAA4BD,EAAE,CAAC4B,QAAH,CAAY,UAAZ,CAA5B,CAAP;AAA8D,CAA7H;;AACA3B,gBAAgB,CAAC4B,KAAjB,GAAyB,aAAc7B,EAAE,CAAC8B,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAE9B,gBAAT;AAA2B+B,EAAAA,OAAO,EAAE/B,gBAAgB,CAACwB,IAArD;AAA2DQ,EAAAA,UAAU,EAAE;AAAvE,CAAtB,CAAvC","sourcesContent":["import * as signalR from '@microsoft/signalr';\r\nimport { HubConnectionBuilder } from '@microsoft/signalr';\r\nimport * as i0 from \"@angular/core\";\r\nexport class WebSocketService {\r\n    constructor(baseUrl) {\r\n        this.baseUrl = baseUrl + \"schatHub\";\r\n        this.HubConnection = new HubConnectionBuilder()\r\n            .configureLogging(signalR.LogLevel.Debug)\r\n            .withUrl(\"http://localhost:5172/schatHub\", {\r\n            skipNegotiation: true,\r\n            transport: signalR.HttpTransportType.WebSockets\r\n        })\r\n            .build();\r\n        this.HubConnection.start();\r\n        this.initWebSocket();\r\n    }\r\n    async initWebSocket() {\r\n        await this.HubConnection.on(\"Test\", message => { console.log(message); });\r\n    }\r\n    async sendMessage(message, recipientLogin) {\r\n        await this.HubConnection.send(\"SendMessage\", message, recipientLogin);\r\n    }\r\n    async SendPublicRSAKey(rsaKey) {\r\n        console.log();\r\n        await this.HubConnection.send(\"SendRSAKeys\", rsaKey);\r\n    }\r\n}\r\nWebSocketService.ɵfac = function WebSocketService_Factory(t) { return new (t || WebSocketService)(i0.ɵɵinject('BASE_URL')); };\r\nWebSocketService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: WebSocketService, factory: WebSocketService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}