{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\DELL\\\\source\\\\repos\\\\CriptedOnlineChat\\\\CriptedOnlineChat\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { HubConnectionBuilder } from '@microsoft/signalr';\nimport * as i0 from \"@angular/core\";\nexport class WebSocketService {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl + \"schatHub\";\n    this.initWebSocket(); //TODO to ngOnInit\n  }\n\n  ngOnInit() {\n    return _asyncToGenerator(function* () {})();\n  }\n\n  initWebSocket() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(_this.baseUrl);\n      _this.HubConnection = new HubConnectionBuilder().withUrl(\"http://localhost:5172/schatHub\", {}).build();\n\n      _this.HubConnection.start();\n\n      console.log(_this.HubConnection.sta);\n      setTimeout(_this.sendmessage, 2000); // TODO Delete\n\n      _this.HubConnection.on(\"Test\", message => {\n        console.log(message);\n      });\n    })();\n  }\n\n  sendmessage(message) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b, _c;\n\n      console.log((_a = _this2.HubConnection) === null || _a === void 0 ? void 0 : _a.state);\n      yield (_b = _this2.HubConnection) === null || _b === void 0 ? void 0 : _b.send(\"MessageTest\", message);\n      yield (_c = _this2.HubConnection) === null || _c === void 0 ? void 0 : _c.invoke(\"MessageTest\", message);\n      console.log(\"sended 2\");\n    })();\n  }\n\n}\n\nWebSocketService.ɵfac = function WebSocketService_Factory(t) {\n  return new (t || WebSocketService)(i0.ɵɵinject('BASE_URL'));\n};\n\nWebSocketService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: WebSocketService,\n  factory: WebSocketService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/DELL/source/repos/CriptedOnlineChat/CriptedOnlineChat/ClientApp/src/app/WebSocket.service.ts"],"names":["HubConnectionBuilder","i0","WebSocketService","constructor","baseUrl","initWebSocket","ngOnInit","console","log","HubConnection","withUrl","build","start","sta","setTimeout","sendmessage","on","message","_a","_b","_c","state","send","invoke","ɵfac","WebSocketService_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,SAASA,oBAAT,QAAqC,oBAArC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,MAAMC,gBAAN,CAAuB;AAC1BC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKA,OAAL,GAAeA,OAAO,GAAG,UAAzB;AACA,SAAKC,aAAL,GAFiB,CAEK;AACzB;;AACKC,EAAAA,QAAQ,GAAG;AAAA;AAChB;;AACKD,EAAAA,aAAa,GAAG;AAAA;;AAAA;AAClBE,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACJ,OAAjB;AACA,MAAA,KAAI,CAACK,aAAL,GAAqB,IAAIT,oBAAJ,GAChBU,OADgB,CACR,gCADQ,EAC0B,EAD1B,EAEhBC,KAFgB,EAArB;;AAGA,MAAA,KAAI,CAACF,aAAL,CAAmBG,KAAnB;;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACC,aAAL,CAAmBI,GAA/B;AACAC,MAAAA,UAAU,CAAC,KAAI,CAACC,WAAN,EAAmB,IAAnB,CAAV,CAPkB,CAOkB;;AACpC,MAAA,KAAI,CAACN,aAAL,CAAmBO,EAAnB,CAAsB,MAAtB,EAA8BC,OAAO,IAAI;AAAEV,QAAAA,OAAO,CAACC,GAAR,CAAYS,OAAZ;AAAuB,OAAlE;AARkB;AASrB;;AACKF,EAAAA,WAAW,CAACE,OAAD,EAAU;AAAA;;AAAA;AACvB,UAAIC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;;AACAb,MAAAA,OAAO,CAACC,GAAR,CAAY,CAACU,EAAE,GAAG,MAAI,CAACT,aAAX,MAA8B,IAA9B,IAAsCS,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACG,KAA9E;AACA,YAAO,CAACF,EAAE,GAAG,MAAI,CAACV,aAAX,MAA8B,IAA9B,IAAsCU,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACG,IAAH,CAAQ,aAAR,EAAuBL,OAAvB,CAAtE;AACA,YAAO,CAACG,EAAE,GAAG,MAAI,CAACX,aAAX,MAA8B,IAA9B,IAAsCW,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACG,MAAH,CAAU,aAAV,EAAyBN,OAAzB,CAAtE;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AALuB;AAM1B;;AAvByB;;AAyB9BN,gBAAgB,CAACsB,IAAjB,GAAwB,SAASC,wBAAT,CAAkCC,CAAlC,EAAqC;AAAE,SAAO,KAAKA,CAAC,IAAIxB,gBAAV,EAA4BD,EAAE,CAAC0B,QAAH,CAAY,UAAZ,CAA5B,CAAP;AAA8D,CAA7H;;AACAzB,gBAAgB,CAAC0B,KAAjB,GAAyB,aAAc3B,EAAE,CAAC4B,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAE5B,gBAAT;AAA2B6B,EAAAA,OAAO,EAAE7B,gBAAgB,CAACsB,IAArD;AAA2DQ,EAAAA,UAAU,EAAE;AAAvE,CAAtB,CAAvC","sourcesContent":["import { HubConnectionBuilder } from '@microsoft/signalr';\r\nimport * as i0 from \"@angular/core\";\r\nexport class WebSocketService {\r\n    constructor(baseUrl) {\r\n        this.baseUrl = baseUrl + \"schatHub\";\r\n        this.initWebSocket(); //TODO to ngOnInit\r\n    }\r\n    async ngOnInit() {\r\n    }\r\n    async initWebSocket() {\r\n        console.log(this.baseUrl);\r\n        this.HubConnection = new HubConnectionBuilder()\r\n            .withUrl(\"http://localhost:5172/schatHub\", {})\r\n            .build();\r\n        this.HubConnection.start();\r\n        console.log(this.HubConnection.sta);\r\n        setTimeout(this.sendmessage, 2000); // TODO Delete\r\n        this.HubConnection.on(\"Test\", message => { console.log(message); });\r\n    }\r\n    async sendmessage(message) {\r\n        var _a, _b, _c;\r\n        console.log((_a = this.HubConnection) === null || _a === void 0 ? void 0 : _a.state);\r\n        await ((_b = this.HubConnection) === null || _b === void 0 ? void 0 : _b.send(\"MessageTest\", message));\r\n        await ((_c = this.HubConnection) === null || _c === void 0 ? void 0 : _c.invoke(\"MessageTest\", message));\r\n        console.log(\"sended 2\");\r\n    }\r\n}\r\nWebSocketService.ɵfac = function WebSocketService_Factory(t) { return new (t || WebSocketService)(i0.ɵɵinject('BASE_URL')); };\r\nWebSocketService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: WebSocketService, factory: WebSocketService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}