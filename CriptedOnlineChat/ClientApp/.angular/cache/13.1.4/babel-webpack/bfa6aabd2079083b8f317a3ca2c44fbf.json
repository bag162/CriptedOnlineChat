{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\DELL\\\\source\\\\repos\\\\CriptedOnlineChat\\\\CriptedOnlineChat\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/db\";\nexport class MessageService {\n  constructor(AppDB) {\n    this.AppDB = AppDB;\n  }\n\n  SendMessage(sendedMessage) {// todo send message\n\n    return _asyncToGenerator(function* () {})();\n  }\n\n  AddNewMessages(addedmessages) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      addedmessages.forEach( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (element) {\n          console.log(element.senderId);\n          console.log(yield _this.AppDB.Contacts.filter(x => x.ContactId == element.senderId).first());\n          let recipientLogin = (yield _this.AppDB.Contacts.filter(x => x.ContactId == element.recipientId).first()).Login;\n          let newMessage = {\n            Data: element.data,\n            RecipientLogin: recipientLogin,\n            IsSender: false\n          };\n          yield _this.AppDB.Messages.add(newMessage);\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n}\n\nMessageService.ɵfac = function MessageService_Factory(t) {\n  return new (t || MessageService)(i0.ɵɵinject(i1.AppDB));\n};\n\nMessageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: MessageService,\n  factory: MessageService.ɵfac,\n  providedIn: 'root'\n});\nexport class SendMessageDTO {}","map":{"version":3,"sources":["C:/Users/DELL/source/repos/CriptedOnlineChat/CriptedOnlineChat/ClientApp/src/app/Services/message.service.ts"],"names":["i0","i1","MessageService","constructor","AppDB","SendMessage","sendedMessage","AddNewMessages","addedmessages","forEach","element","console","log","senderId","Contacts","filter","x","ContactId","first","recipientLogin","recipientId","Login","newMessage","Data","data","RecipientLogin","IsSender","Messages","add","ɵfac","MessageService_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","SendMessageDTO"],"mappings":";AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,QAApB;AACA,OAAO,MAAMC,cAAN,CAAqB;AACxBC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,SAAKA,KAAL,GAAaA,KAAb;AACH;;AACKC,EAAAA,WAAW,CAACC,aAAD,EAAgB,CAC7B;;AAD6B;AAEhC;;AACKC,EAAAA,cAAc,CAACC,aAAD,EAAgB;AAAA;;AAAA;AAChCA,MAAAA,aAAa,CAACC,OAAd;AAAA,qCAAsB,WAAOC,OAAP,EAAmB;AACrCC,UAAAA,OAAO,CAACC,GAAR,CAAYF,OAAO,CAACG,QAApB;AACAF,UAAAA,OAAO,CAACC,GAAR,OAAkB,KAAI,CAACR,KAAL,CAAWU,QAAX,CAAoBC,MAApB,CAA2BC,CAAC,IAAIA,CAAC,CAACC,SAAF,IAAeP,OAAO,CAACG,QAAvD,EAAiEK,KAAjE,EAAlB;AACA,cAAIC,cAAc,GAAG,OAAO,KAAI,CAACf,KAAL,CAAWU,QAAX,CAAoBC,MAApB,CAA2BC,CAAC,IAAIA,CAAC,CAACC,SAAF,IAAeP,OAAO,CAACU,WAAvD,EAAoEF,KAApE,EAAP,EAAoFG,KAAzG;AACA,cAAIC,UAAU,GAAG;AAAEC,YAAAA,IAAI,EAAEb,OAAO,CAACc,IAAhB;AAAsBC,YAAAA,cAAc,EAAEN,cAAtC;AAAsDO,YAAAA,QAAQ,EAAE;AAAhE,WAAjB;AACA,gBAAM,KAAI,CAACtB,KAAL,CAAWuB,QAAX,CAAoBC,GAApB,CAAwBN,UAAxB,CAAN;AACH,SAND;;AAAA;AAAA;AAAA;AAAA;AADgC;AAQnC;;AAfuB;;AAiB5BpB,cAAc,CAAC2B,IAAf,GAAsB,SAASC,sBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAO,KAAKA,CAAC,IAAI7B,cAAV,EAA0BF,EAAE,CAACgC,QAAH,CAAY/B,EAAE,CAACG,KAAf,CAA1B,CAAP;AAA0D,CAArH;;AACAF,cAAc,CAAC+B,KAAf,GAAuB,aAAcjC,EAAE,CAACkC,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAEjC,cAAT;AAAyBkC,EAAAA,OAAO,EAAElC,cAAc,CAAC2B,IAAjD;AAAuDQ,EAAAA,UAAU,EAAE;AAAnE,CAAtB,CAArC;AACA,OAAO,MAAMC,cAAN,CAAqB","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/db\";\r\nexport class MessageService {\r\n    constructor(AppDB) {\r\n        this.AppDB = AppDB;\r\n    }\r\n    async SendMessage(sendedMessage) {\r\n        // todo send message\r\n    }\r\n    async AddNewMessages(addedmessages) {\r\n        addedmessages.forEach(async (element) => {\r\n            console.log(element.senderId);\r\n            console.log(await this.AppDB.Contacts.filter(x => x.ContactId == element.senderId).first());\r\n            let recipientLogin = (await this.AppDB.Contacts.filter(x => x.ContactId == element.recipientId).first()).Login;\r\n            let newMessage = { Data: element.data, RecipientLogin: recipientLogin, IsSender: false };\r\n            await this.AppDB.Messages.add(newMessage);\r\n        });\r\n    }\r\n}\r\nMessageService.ɵfac = function MessageService_Factory(t) { return new (t || MessageService)(i0.ɵɵinject(i1.AppDB)); };\r\nMessageService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: MessageService, factory: MessageService.ɵfac, providedIn: 'root' });\r\nexport class SendMessageDTO {\r\n}\r\n"]},"metadata":{},"sourceType":"module"}